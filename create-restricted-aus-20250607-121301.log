[2025-06-07 12:13:01] [INFO] Starting Restricted Administrative Unit creation and population script...
[2025-06-07 12:13:01] [INFO] Organization Name: MyOrg
[2025-06-07 12:13:01] [INFO] Connecting to Microsoft Graph using service principal...
[2025-06-07 12:13:01] [INFO] Using service principal authentication
[2025-06-07 12:13:02] [INFO] Connected to tenant: 3a485804-7b42-4133-b30d-a158f6738201
[2025-06-07 12:13:02] [INFO] Connected as: 
[2025-06-07 12:13:02] [INFO] Retrieving Tier groups for organization: MyOrg
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier1-Teams-Administrator for Tier-1
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier1-Application-Developer for Tier-1
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-User-Administrator for Tier-2
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier1-Directory-Synchronization-Accounts for Tier-1
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-Password-Administrator for Tier-2
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-Reports-Reader for Tier-2
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-Helpdesk-Administrator for Tier-2
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier0-Privileged-Authentication-Administrator for Tier-0
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier1-SharePoint-Administrator for Tier-1
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier1-Exchange-Administrator for Tier-1
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier0-Privileged-Role-Administrator for Tier-0
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier1-Compliance-Administrator for Tier-1
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier1-Information-Protection-Administrator for Tier-1
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier1-Cloud-Application-Administrator for Tier-1
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier0-Conditional-Access-Administrator for Tier-0
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier0-Intune-Administrator for Tier-0
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier0-Hybrid-Identity-Administrator for Tier-0
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier0-Security-Administrator for Tier-0
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier0-Authentication-Administrator for Tier-0
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier0-Global-Administrator for Tier-0
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier0-Application-Administrator for Tier-0
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-Usage-Summary-Reports-Reader for Tier-2
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-Directory-Readers for Tier-2
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-Message-Center-Reader for Tier-2
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-Groups-Administrator for Tier-2
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-License-Administrator for Tier-2
[2025-06-07 12:13:02] [INFO] Found group: MyOrg-Tier2-Guest-Inviter for Tier-2
[2025-06-07 12:13:02] [INFO] Group summary:
[2025-06-07 12:13:02] [INFO]   Tier-1: 8 groups
[2025-06-07 12:13:02] [INFO]   Tier-2: 10 groups
[2025-06-07 12:13:02] [INFO]   Tier-0: 9 groups
[2025-06-07 12:13:02] [INFO] Processing Administrative Unit: Tier-0
[2025-06-07 12:13:02] [INFO] Creating Restricted Administrative Unit: Tier-0
[2025-06-07 12:13:02] [INFO] Creating new restricted AU: Tier-0
[2025-06-07 12:13:02] [INFO] Successfully created Restricted Administrative Unit: Tier-0 (ID: 75d4159b-f04e-4e82-97dc-8ee4f86c3acf)
[2025-06-07 12:13:02] [INFO] Verification - IsMemberManagementRestricted: True
[2025-06-07 12:13:02] [INFO] Setting enhanced permissions for AU: Tier-0
[2025-06-07 12:13:03] [INFO] Set visibility to 'HiddenMembership' and enabled restricted management for Tier-0
[2025-06-07 12:13:03] [INFO] Adding 9 groups to Tier-0
[2025-06-07 12:13:03] [INFO] Successfully added group 'MyOrg-Tier0-Privileged-Authentication-Administrator' to AU 'Tier-0'
[2025-06-07 12:13:03] [INFO] Successfully added group 'MyOrg-Tier0-Privileged-Role-Administrator' to AU 'Tier-0'
[2025-06-07 12:13:04] [INFO] Successfully added group 'MyOrg-Tier0-Conditional-Access-Administrator' to AU 'Tier-0'
[2025-06-07 12:13:04] [INFO] Successfully added group 'MyOrg-Tier0-Intune-Administrator' to AU 'Tier-0'
[2025-06-07 12:13:04] [INFO] Successfully added group 'MyOrg-Tier0-Hybrid-Identity-Administrator' to AU 'Tier-0'
[2025-06-07 12:13:04] [INFO] Successfully added group 'MyOrg-Tier0-Security-Administrator' to AU 'Tier-0'
[2025-06-07 12:13:04] [INFO] Successfully added group 'MyOrg-Tier0-Authentication-Administrator' to AU 'Tier-0'
[2025-06-07 12:13:05] [INFO] Successfully added group 'MyOrg-Tier0-Global-Administrator' to AU 'Tier-0'
[2025-06-07 12:13:05] [INFO] Successfully added group 'MyOrg-Tier0-Application-Administrator' to AU 'Tier-0'
[2025-06-07 12:13:05] [INFO] Processing Administrative Unit: Tier-1
[2025-06-07 12:13:05] [INFO] Creating Restricted Administrative Unit: Tier-1
[2025-06-07 12:13:05] [INFO] Creating new restricted AU: Tier-1
[2025-06-07 12:13:05] [INFO] Successfully created Restricted Administrative Unit: Tier-1 (ID: 7329bce3-f294-480f-a8a3-4d571645b5cc)
[2025-06-07 12:13:05] [INFO] Verification - IsMemberManagementRestricted: True
[2025-06-07 12:13:05] [INFO] Setting enhanced permissions for AU: Tier-1
[2025-06-07 12:13:05] [INFO] Set visibility to 'HiddenMembership' and enabled restricted management for Tier-1
[2025-06-07 12:13:05] [INFO] Adding 8 groups to Tier-1
[2025-06-07 12:13:05] [INFO] Successfully added group 'MyOrg-Tier1-Teams-Administrator' to AU 'Tier-1'
[2025-06-07 12:13:06] [INFO] Successfully added group 'MyOrg-Tier1-Application-Developer' to AU 'Tier-1'
[2025-06-07 12:13:06] [INFO] Successfully added group 'MyOrg-Tier1-Directory-Synchronization-Accounts' to AU 'Tier-1'
[2025-06-07 12:13:06] [INFO] Successfully added group 'MyOrg-Tier1-SharePoint-Administrator' to AU 'Tier-1'
[2025-06-07 12:13:06] [INFO] Successfully added group 'MyOrg-Tier1-Exchange-Administrator' to AU 'Tier-1'
[2025-06-07 12:13:06] [INFO] Successfully added group 'MyOrg-Tier1-Compliance-Administrator' to AU 'Tier-1'
[2025-06-07 12:13:07] [INFO] Successfully added group 'MyOrg-Tier1-Information-Protection-Administrator' to AU 'Tier-1'
[2025-06-07 12:13:07] [INFO] Successfully added group 'MyOrg-Tier1-Cloud-Application-Administrator' to AU 'Tier-1'
[2025-06-07 12:13:07] [INFO] Processing Administrative Unit: Tier-2
[2025-06-07 12:13:07] [INFO] Creating Restricted Administrative Unit: Tier-2
[2025-06-07 12:13:07] [INFO] Creating new restricted AU: Tier-2
[2025-06-07 12:13:07] [INFO] Successfully created Restricted Administrative Unit: Tier-2 (ID: 961d9ae3-085f-4055-bb25-1078a1fbe13d)
[2025-06-07 12:13:07] [INFO] Verification - IsMemberManagementRestricted: True
[2025-06-07 12:13:07] [INFO] Setting enhanced permissions for AU: Tier-2
[2025-06-07 12:13:07] [INFO] Set visibility to 'Public' and enabled restricted management for Tier-2
[2025-06-07 12:13:07] [INFO] Adding 10 groups to Tier-2
[2025-06-07 12:13:07] [INFO] Successfully added group 'MyOrg-Tier2-User-Administrator' to AU 'Tier-2'
[2025-06-07 12:13:08] [INFO] Successfully added group 'MyOrg-Tier2-Password-Administrator' to AU 'Tier-2'
[2025-06-07 12:13:08] [INFO] Successfully added group 'MyOrg-Tier2-Reports-Reader' to AU 'Tier-2'
[2025-06-07 12:13:08] [INFO] Successfully added group 'MyOrg-Tier2-Helpdesk-Administrator' to AU 'Tier-2'
[2025-06-07 12:13:08] [INFO] Successfully added group 'MyOrg-Tier2-Usage-Summary-Reports-Reader' to AU 'Tier-2'
[2025-06-07 12:13:08] [INFO] Successfully added group 'MyOrg-Tier2-Directory-Readers' to AU 'Tier-2'
[2025-06-07 12:13:08] [INFO] Successfully added group 'MyOrg-Tier2-Message-Center-Reader' to AU 'Tier-2'
[2025-06-07 12:13:09] [INFO] Successfully added group 'MyOrg-Tier2-Groups-Administrator' to AU 'Tier-2'
[2025-06-07 12:13:09] [INFO] Successfully added group 'MyOrg-Tier2-License-Administrator' to AU 'Tier-2'
[2025-06-07 12:13:09] [INFO] Successfully added group 'MyOrg-Tier2-Guest-Inviter' to AU 'Tier-2'
[2025-06-07 12:13:09] [INFO] Restricted Administrative Unit creation and population completed
[2025-06-07 12:13:09] [INFO] Created/Updated 3 Administrative Units:
[2025-06-07 12:13:09] [INFO]   - Tier-0 (ID: 75d4159b-f04e-4e82-97dc-8ee4f86c3acf) - Members: 9
[2025-06-07 12:13:09] [INFO]   - Tier-1 (ID: 7329bce3-f294-480f-a8a3-4d571645b5cc) - Members: 8
[2025-06-07 12:13:09] [INFO]   - Tier-2 (ID: 961d9ae3-085f-4055-bb25-1078a1fbe13d) - Members: 10
[2025-06-07 12:13:09] [INFO] Script execution completed successfully
[2025-06-07 12:13:09] [INFO] Disconnected from Microsoft Graph
[2025-06-07 12:13:09] [INFO] Log file saved to: create-restricted-aus-20250607-121301.log
